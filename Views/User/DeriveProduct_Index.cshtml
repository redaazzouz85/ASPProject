@model IEnumerable<ASPProject.Models.DeriveProductModel>

@{
    ViewBag.Title = "DeriveProduct_Index";
}

<h2 style="position:center">Derived Product </h2>

<hr />
<div style="align-content:flex-end">
    @using (Html.BeginForm("DeriveProduct_Index", "User", FormMethod.Post))
    {
    <select name="SelectedDeriveCollection" id="DeriveCollection-select" onchange="this.form.submit()">

        <option value="">--Please choose an option--</option>
        <option value="0">All</option>

        @foreach (var y in ViewBag.noDuplicate_typeList)
        {
            <option value="@y">@y</option>

        }
        @* @foreach (var y in Model)
        {
            foreach (var type in y.noDuplicate_typeList)
            {
                <option value="@type">@type</option>

            }
              @{

                List<string> TypeList = y.getTypes();
                List<string> TypeList_Without_Duplication = TypeList.Distinct().ToList();
            }
            @for (int i = 0; i <= Model.Count(); i++)
            {
                <option value="@y.Product_Type">@TypeList_Without_Duplication.ElementAt(i)</option>

            }
        *@
        }

        @{
            if (ViewBag.OriginList != null)
            {
                foreach (var x in ViewBag.OriginList)
                {
                    <option value="@x">@x</option>
                }


            }
            else
            {
                foreach (var x in Model)
                {
                    <option value="@x.Original_Product">@x.Original_Product</option>
                }
            }
        }
    </select>
    }
        <hr />
    </div>


<div class="container container-fluid">
    @foreach (var item in Model)
    {

        <div class="col-sm-4 d-flex pb-3">
            <div class="card card-block" style="width: 30rem; text-align:center;">
                <div id="container">
                    <img class="card-img-top" src="@Url.Content(item.Image)" width="250" height="350" asp-append-version="true" alt="Card image cap">
                    @{
                        if (item.Quantity == 0)
                        {
                            <img class="card-img-top" id="img2" src="~/Images/soldOut.png" width="100" height="100" asp-append-version="true" alt="Card image cap">

                        }
                    }
                </div>
               
                <div class="card-body">
                    <h5 class="card-title">@item.Name</h5>
                    <h6 class="bg-primary"> @item.Original_Product</h6>
                </div>
                <ul class="list-group list-group-flush ">
                    <li class="list-group-item ">@item.Quantity Available </li>
                    <li class="list-group-item"> @item.Price <span>$</span></li>

                </ul>
                <div class="card-body">

                    <a href="#" class="card-link">Add to cart</a>
                </div>
            </div>
        </div>

    }
</div>
<style>
    #container {
        position: relative;
    }

    #img2 {
        position: absolute;
        right: 30px;
        top: 5px;
    }
</style>
